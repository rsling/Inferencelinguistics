
% By LSP.
\renewbibmacro*{index:name}[5]{%
  \usebibmacro{index:entry}{#1}
    {\iffieldundef{usera}{}{\thefield{usera}\actualoperator}\mkbibindexname{#2}{#3}{#4}{#5}}}


% By LSP.
\makeatletter
\def\blx@maxline{77}
\makeatother


% Fix line spacing in list environmens.
%\setlist{noitemsep}

% Make vertically centred cell type.
\newcolumntype{P}{>{\centering\arraybackslash}r}

% Strikeout in math.
\newcommand{\stk}[1]{\ifmmode\text{\sout{\ensuremath{#1}}}\else\sout{#1}\fi}

% Defining equal
\newcommand{\defeq}{\vcentcolon=}

% Correct hyperref colors which otherwise give you eye cancer.
\hypersetup{
  linkbordercolor  = {white}
  , linkcolor        = {lsMidDarkBlue}
  , anchorcolor      = {lsMidWine}
  , citecolor        = {lsDarkGreenOne}
  , menucolor        = {lsMidDarkBlue}
  , urlcolor         = {lsDarkOrange}
%    , filecolor       = {}
%    , runcolor        = {}
}


% Use a better mono font, ideal for code.
% https://github.com/chrissimpkins/codeface/tree/master/fonts/inconsolata-g
\setmonofont{Inconsolata-g}


% Use a math font that actually works! Requires unicode-math paackage.
% https://github.com/khaledhosny/libertinus
% \setmathfont[Scale=MatchUppercase]{libertinusmath-regular.otf}
\setmathfont[Scale=MatchUppercase]{LibertinusMath-Regular.otf}

% Set listing style. knitr uses RStyle style. Which you have to know...
\definecolor{listingbackground}{gray}{0.95}
\lstdefinestyle{RStyle}{
  language=R,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\ttfamily\color{lsDarkOrange},
  stringstyle=\ttfamily\color{lsDarkBlue},
  identifierstyle=\ttfamily\color{lsDarkGreenOne},
  commentstyle=\ttfamily\color{lsLightBlue},
  upquote=true,
  breaklines=true,
  backgroundcolor=\color{listingbackground},
  framesep=5mm,
  frame=trlb,
  framerule=0pt,
  linewidth=\dimexpr\textwidth-5mm,
  xleftmargin=5mm
  }
\lstset{style=Rstyle}

\newcommand{\ie}{i.\,e.}
\newcommand{\eg}{e.\,g.}

\newcommand{\Dim}{\cellcolor{lightgray}}

\newcommand{\CellGreen}{\cellcolor{lightgreen}}
\newcommand{\CellBlue}{\cellcolor{lightblue}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% From EGBD4

% boxes and stuff for definitions, axioms etc.
\definecolor{textblue}{rgb}{0,0,.3}
\definecolor{textred}{rgb}{.5,0,0}
\definecolor{textgreen}{rgb}{0,.5,0}
\definecolor{lightblue}{rgb}{.9,.9,1}
\definecolor{lightgreen}{rgb}{.9,1,.9}
\definecolor{lightred}{rgb}{1,.9,.9}
\definecolor{lightyellow}{rgb}{1,1,.8}
\definecolor{lightgray}{rgb}{.88,.88,.88}
\definecolor{lsLightgray}{gray}{0.88}
\definecolor{lsYellow}{cmyk}{0,0.25,1,0}

\newcommand{\alert}[1]{\textbf{#1}}

\newcommand{\Key}[1]{\textcolor{black}{#1}%
  \marginpar{\centering\scriptsize\textcolor{gray}{#1}}}

\newcommand{\Problem}[2]{%
\tblscolorbox{lightgray}{Problem Statement: #1}{%
#2}}

\newcommand{\Bigpoint}[2]{%
\tblsframebox{lightgray}{Big Point: #1}{%
#2}}

\newcommand{\Indepth}{\colorbox{lightgray}{\textsc{In-Depth}}}


\newcommand{\Dice}[1]{\raisebox{-1pt}{\epsdice{#1}}}
